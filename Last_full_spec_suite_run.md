# Last Full Spec Suite Run

## Run Date
2025-11-11

## Execution Method
Run in segments to avoid timeouts and identify issues more efficiently. Never run `bundle exec rspec` without arguments.

## Status
✅ **Complete** - Full suite run completed

**Started**: 2025-11-11 01:54:13
**Completed**: 2025-11-11 02:08:15

## Timing Results

### Model Specs
- **Status**: ✅ Complete
- **Time**: 35.29 seconds (41.39 seconds total with load time)
- **Date/Time**: 2025-11-11 01:54:13
- **Examples**: 994
- **Failures**: 0
- **Pending**: 1

### Controller Specs
- **Status**: ✅ Complete
- **Time**: 35.09 seconds (39.31 seconds total with load time)
- **Date/Time**: 2025-11-11 01:55:18
- **Examples**: 405
- **Failures**: 0

### Request Specs
- **Status**: ✅ Complete
- **Time**: 23.40 seconds (28.41 seconds total with load time)
- **Date/Time**: 2025-11-11 01:56:16
- **Examples**: 171
- **Failures**: 0

### Decorator Specs
- **Status**: ✅ Complete
- **Time**: 2.66 seconds (6.72 seconds total with load time)
- **Date/Time**: 2025-11-11 01:56:55
- **Examples**: 35
- **Failures**: 0

### Policy Specs
- **Status**: ✅ Complete
- **Time**: 9.45 seconds (13.55 seconds total with load time)
- **Date/Time**: 2025-11-11 01:57:14
- **Examples**: 187
- **Failures**: 0

### Service Specs
- **Status**: ⚠️ Complete with Failures
- **Time**: 12.29 seconds (17.35 seconds total with load time)
- **Date/Time**: 2025-11-11 01:57:29
- **Examples**: 270
- **Failures**: 5

### Query Specs
- **Status**: ✅ Complete
- **Time**: 26.38 seconds (30.49 seconds total with load time)
- **Date/Time**: 2025-11-11 01:57:49
- **Examples**: 125
- **Failures**: 0

### Job Specs
- **Status**: ✅ Complete
- **Time**: 6.44 seconds (10.44 seconds total with load time)
- **Date/Time**: 2025-11-11 01:58:21
- **Examples**: 67
- **Failures**: 0

### Form Specs
- **Status**: ✅ Complete
- **Time**: 4.04 seconds (8.06 seconds total with load time)
- **Date/Time**: 2025-11-11 01:58:33
- **Examples**: 82
- **Failures**: 0

### Helper Specs
- **Status**: ✅ Complete
- **Time**: 8.42 seconds (12.51 seconds total with load time)
- **Date/Time**: 2025-11-11 01:58:42
- **Examples**: 82
- **Failures**: 0

### System Specs - Abilities
- **Status**: ✅ Complete
- **Time**: 17.43 seconds (21.71 seconds total with load time)
- **Date/Time**: 2025-11-11 01:59:35
- **Examples**: 3
- **Failures**: 0

### System Specs - Aspirations
- **Status**: ✅ Complete
- **Time**: 21.26 seconds (26.21 seconds total with load time)
- **Date/Time**: 2025-11-11 01:59:59
- **Examples**: 7
- **Failures**: 0

### System Specs - Assignments
- **Status**: ✅ Complete
- **Time**: 11.42 seconds (16.35 seconds total with load time)
- **Date/Time**: 2025-11-11 02:00:27
- **Examples**: 2
- **Failures**: 0

### System Specs - Check-in Observations
- **Status**: ✅ Complete (1 pending)
- **Time**: 0.34 seconds (5.32 seconds total with load time)
- **Date/Time**: 2025-11-11 02:01:06
- **Examples**: 1
- **Failures**: 0
- **Pending**: 1

### System Specs - Check-ins
- **Status**: ✅ Complete
- **Time**: 14.17 seconds (18.23 seconds total with load time)
- **Date/Time**: 2025-11-11 02:00:46
- **Examples**: 6
- **Failures**: 0

### System Specs - Finalization
- **Status**: ✅ Complete
- **Time**: 16.93 seconds (20.99 seconds total with load time)
- **Date/Time**: 2025-11-11 02:01:13
- **Examples**: 3
- **Failures**: 0

### System Specs - Goals
- **Status**: ✅ Complete (7 pending)
- **Time**: 88.35 seconds (93.31 seconds total with load time)
- **Date/Time**: 2025-11-11 02:01:36
- **Examples**: 43
- **Failures**: 0
- **Pending**: 7

### System Specs - Huddles
- **Status**: ⚠️ Complete with Failures
- **Time**: 22.38 seconds (27.52 seconds total with load time)
- **Date/Time**: 2025-11-11 02:03:12
- **Examples**: 6
- **Failures**: 3

### System Specs - Misc
- **Status**: ⚠️ Complete with Failures
- **Time**: 75.96 seconds (80.96 seconds total with load time)
- **Date/Time**: 2025-11-11 02:03:42
- **Examples**: 31
- **Failures**: 4

### System Specs - Observations
- **Status**: ⚠️ Complete with Failures
- **Time**: 8.29 seconds (13.23 seconds total with load time)
- **Date/Time**: 2025-11-11 02:05:05
- **Examples**: 5
- **Failures**: 1

### System Specs - Positions and Seats
- **Status**: ✅ Complete (3 pending)
- **Time**: 0.39 seconds (4.59 seconds total with load time)
- **Date/Time**: 2025-11-11 02:05:21
- **Examples**: 3
- **Failures**: 0
- **Pending**: 3

### System Specs - Teammates
- **Status**: ✅ Complete (3 pending)
- **Time**: 0.38 seconds (4.41 seconds total with load time)
- **Date/Time**: 2025-11-11 02:05:27
- **Examples**: 3
- **Failures**: 0
- **Pending**: 3

### System Specs - Audit
- **Status**: ✅ Complete (3 pending)
- **Time**: 0.37 seconds (4.37 seconds total with load time)
- **Date/Time**: 2025-11-11 02:05:33
- **Examples**: 3
- **Failures**: 0
- **Pending**: 3

### System Specs - People
- **Status**: ✅ Complete
- **Time**: 11.04 seconds (15.16 seconds total with load time)
- **Date/Time**: 2025-11-11 02:08:19
- **Examples**: 2
- **Failures**: 0

### ENM Specs
- **Status**: ✅ Complete
- **Time**: 27.78 seconds (31.83 seconds total with load time)
- **Date/Time**: 2025-11-11 02:05:39
- **Examples**: 106
- **Failures**: 0

## Total Summary
- **Total Examples**: 2,404 (994 models + 405 controllers + 171 requests + 35 decorators + 187 policies + 270 services + 125 queries + 67 jobs + 82 forms + 82 helpers + 112 system + 106 ENM)
- **Total Failures**: 13 (0 models + 0 controllers + 0 requests + 0 decorators + 0 policies + 5 services + 0 queries + 0 jobs + 0 forms + 0 helpers + 8 system failures + 0 ENM)
- **Total Errors**: 0
- **Total Pending**: 14 (system specs)
- **Total Time**: ~14 minutes (when run in segments)
- **System Spec Examples**: 112
- **System Spec Failures**: 8

## Failure Analysis

This section contains detailed information about each failed spec from the current run. Failures are grouped by segment and then by pattern/root cause when possible.

### Service Specs (5 failures)

**Primary Issue**: NotificationApiService test failures

**Affected Tests**:
1. **NotificationApiService#test_connection when an exception occurs**
   - **File**: `spec/services/notification_api_service_spec.rb:71`
   - **Error**: Expected `false` but got `Hash` with `{success: false, error: "Network error", ...}`
   - **Root Cause**: Method returns hash instead of boolean - test expectation needs update

2. **NotificationApiService#test_connection when connection is successful**
   - **File**: `spec/services/notification_api_service_spec.rb:22`
   - **Error**: Expected URL `'https://api.notificationapi.com/sender'` but got `'https://api.notificationapi.com/test_client_id/sender'`
   - **Root Cause**: URL includes client_id in path - test expectation needs update

3. **NotificationApiService#test_connection when connection fails**
   - **File**: `spec/services/notification_api_service_spec.rb:60`
   - **Error**: Similar to #1 - returns hash instead of boolean
   - **Root Cause**: Method returns hash instead of boolean - test expectation needs update

4. **NotificationApiService#send_notification when notification is sent successfully**
   - **File**: `spec/services/notification_api_service_spec.rb:106`
   - **Error**: Channel-specific parameters issue
   - **Root Cause**: Test expectation mismatch with actual API behavior

5. **EmploymentDataUploadParser#parse with valid XLSX content with header aliases**
   - **File**: `spec/services/employment_data_upload_parser_spec.rb:114`
   - **Error**: Header alias parsing issue
   - **Root Cause**: Header alias parsing logic may have changed

### System Specs - Huddles (3 failures)

**Affected Tests**:
1. **Huddles Core Flow Create huddle from existing company, department, or team creates huddle from existing company**
   - **File**: `spec/system/huddles/huddles_core_flow_spec.rb:15`
   - **Root Cause**: Huddle creation flow issue with company selection

2. **Huddles Core Flow Create huddle from existing company, department, or team creates huddle from existing department**
   - **File**: `spec/system/huddles/huddles_core_flow_spec.rb:50`
   - **Root Cause**: Huddle creation flow issue with department selection

3. **Huddles Core Flow Create huddle and create new team in huddle creation flow creates new team during huddle creation**
   - **File**: `spec/system/huddles/huddles_core_flow_spec.rb:104`
   - **Root Cause**: Team creation during huddle creation flow issue

### System Specs - Misc (4 failures)

**Affected Tests**:
1. **Slack Integration Navigation includes Slack integration link in navigation**
   - **File**: `spec/system/misc/slack_integration_spec.rb:213`
   - **Root Cause**: Navigation structure may have changed

2. **Slack Integration Navigation navigates to Slack dashboard from navigation**
   - **File**: `spec/system/misc/slack_integration_spec.rb:234`
   - **Root Cause**: Navigation link or route may have changed

3. **Organization Dashboard Dashboard navigation navigates to observations creation**
   - **File**: `spec/system/misc/organization_dashboard_spec.rb:75`
   - **Root Cause**: Dashboard navigation structure may have changed

4. **Slack Integration Feedback submission with Slack notification submits feedback and triggers Slack notification**
   - **File**: `spec/system/misc/slack_integration_spec.rb` (line number from screenshot)
   - **Root Cause**: Slack notification integration issue

### System Specs - Observations (1 failure)

**Affected Tests**:
1. **Observation Show Page Publish button when observation is a draft does not allow non-observer to access show page**
   - **File**: `spec/system/observations/show_page_spec.rb:40`
   - **Root Cause**: Authorization logic for draft observations may have changed

### Notes

- All unit/integration specs (models, controllers, requests, decorators, policies, queries, jobs, forms, helpers) passed with 0 failures
- Service specs have 5 failures related to NotificationApiService API changes and EmploymentDataUploadParser
- System specs have 8 failures across 3 segments (huddles, misc, observations) - mostly navigation/UI flow issues
- 14 pending tests in system specs (marked with xit)

---

**Note**: This failure analysis will be automatically populated when running segments with the segmented spec running strategy. Each failure will include:
- **File Path**: Full path to the spec file
- **Line Number**: Line number of the failing test (if available)
- **Test Description**: The full description of the failing test
- **Error Message**: First line or key excerpt of the error message
- **Suspected Issue**: Analysis of the error pattern to identify the likely root cause
