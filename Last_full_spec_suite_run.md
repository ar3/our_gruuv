# Last Full Spec Suite Run

## Run Date
2025-11-14

## Execution Method
Run in segments to avoid timeouts and identify issues more efficiently. Never run `bundle exec rspec` without arguments.

## Status
⚠️ **Complete** - 14 failures identified

**Started**: 2025-11-14 07:17:15 EST
**Last Updated**: 2025-11-14 07:43:16 EST

## Timing Results

### Model Specs
- **Status**: ✅ Complete
- **Time**: 44.14 seconds (49.47 seconds total with load time)
- **Date/Time**: 2025-11-14 07:17:15 EST
- **Examples**: 995
- **Failures**: 0
- **Pending**: 1

### Controller Specs
- **Status**: ✅ Complete
- **Time**: 30.87 seconds (35.81 seconds total with load time)
- **Date/Time**: 2025-11-14 07:18:19 EST
- **Examples**: 439
- **Failures**: 0

### Request Specs
- **Status**: ✅ Complete
- **Time**: 17.52 seconds (22.33 seconds total with load time)
- **Date/Time**: 2025-11-14 07:19:25 EST
- **Examples**: 185
- **Failures**: 0

### Decorator Specs
- **Status**: ✅ Complete
- **Time**: 2.23 seconds (6.08 seconds total with load time)
- **Date/Time**: 2025-11-14 07:20:18 EST
- **Examples**: 35
- **Failures**: 0

### Policy Specs
- **Status**: ✅ Complete
- **Time**: 5.90 seconds (8.84 seconds total with load time)
- **Date/Time**: 2025-11-14 07:21:16 EST
- **Examples**: 187
- **Failures**: 0

### Service Specs
- **Status**: ✅ Complete
- **Time**: 18.78 seconds (23.37 seconds total with load time)
- **Date/Time**: 2025-11-14 07:22:16 EST
- **Examples**: 326
- **Failures**: 0
- **Pending**: 1

### Query Specs
- **Status**: ✅ Complete
- **Time**: 17.26 seconds (20.22 seconds total with load time)
- **Date/Time**: 2025-11-14 07:23:16 EST
- **Examples**: 125
- **Failures**: 0

### Job Specs
- **Status**: ✅ Complete
- **Time**: 4.96 seconds (8.23 seconds total with load time)
- **Date/Time**: 2025-11-14 07:24:16 EST
- **Examples**: 67
- **Failures**: 0

### Form Specs
- **Status**: ✅ Complete
- **Time**: 4.38 seconds (7.85 seconds total with load time)
- **Date/Time**: 2025-11-14 07:25:16 EST
- **Examples**: 102
- **Failures**: 0

### Helper Specs
- **Status**: ✅ Complete
- **Time**: 5.99 seconds (10.57 seconds total with load time)
- **Date/Time**: 2025-11-14 07:26:16 EST
- **Examples**: 82
- **Failures**: 0

### System Specs - Abilities
- **Status**: ✅ Complete
- **Time**: 16.49 seconds (21.05 seconds total with load time)
- **Date/Time**: 2025-11-14 07:27:21 EST
- **Examples**: 3
- **Failures**: 0

### System Specs - Aspirations
- **Status**: ✅ Complete
- **Time**: 19.17 seconds (23.23 seconds total with load time)
- **Date/Time**: 2025-11-14 07:28:16 EST
- **Examples**: 7
- **Failures**: 0

### System Specs - Assignments
- **Status**: ✅ Complete
- **Time**: 10.61 seconds (13.79 seconds total with load time)
- **Date/Time**: 2025-11-14 07:29:16 EST
- **Examples**: 2
- **Failures**: 0

### System Specs - Audit
- **Status**: ✅ Complete (3 pending)
- **Time**: 0.32 seconds (3.48 seconds total with load time)
- **Date/Time**: 2025-11-14 07:30:16 EST
- **Examples**: 3
- **Failures**: 0
- **Pending**: 3

### System Specs - Check-in Observations
- **Status**: ✅ Complete (1 pending)
- **Time**: 0.43 seconds (3.37 seconds total with load time)
- **Date/Time**: 2025-11-14 07:30:21 EST
- **Examples**: 1
- **Failures**: 0
- **Pending**: 1

### System Specs - Check-ins
- **Status**: ✅ Complete
- **Time**: 12.80 seconds (15.68 seconds total with load time)
- **Date/Time**: 2025-11-14 07:30:26 EST
- **Examples**: 6
- **Failures**: 0

### System Specs - Finalization
- **Status**: ✅ Complete
- **Time**: 16.03 seconds (19.04 seconds total with load time)
- **Date/Time**: 2025-11-14 07:31:16 EST
- **Examples**: 3
- **Failures**: 0

### System Specs - Goals
- **Status**: ⚠️ Complete (14 failures, 7 pending)
- **Time**: 132.40 seconds (135.48 seconds total with load time)
- **Date/Time**: 2025-11-14 07:32:16 EST
- **Examples**: 43
- **Failures**: 14
- **Pending**: 7

### System Specs - Huddles
- **Status**: ✅ Complete
- **Time**: 16.85 seconds (21.46 seconds total with load time)
- **Date/Time**: 2025-11-14 07:35:16 EST
- **Examples**: 6
- **Failures**: 0

### System Specs - Misc
- **Status**: ✅ Complete
- **Time**: 70.05 seconds (73.50 seconds total with load time)
- **Date/Time**: 2025-11-14 07:36:16 EST
- **Examples**: 31
- **Failures**: 0

### System Specs - Observations
- **Status**: ✅ Complete
- **Time**: 22.90 seconds (27.65 seconds total with load time)
- **Date/Time**: 2025-11-14 07:38:17 EST
- **Examples**: 12
- **Failures**: 0

### System Specs - Organizations/Teammates
- **Status**: ✅ Complete
- **Time**: 24.20 seconds (29.25 seconds total with load time)
- **Date/Time**: 2025-11-14 07:39:16 EST
- **Examples**: 8
- **Failures**: 0

### System Specs - People
- **Status**: ✅ Complete
- **Time**: 12.49 seconds (17.52 seconds total with load time)
- **Date/Time**: 2025-11-14 07:40:16 EST
- **Examples**: 2
- **Failures**: 0

### System Specs - Positions and Seats
- **Status**: ✅ Complete (3 pending)
- **Time**: 0.81 seconds (5.31 seconds total with load time)
- **Date/Time**: 2025-11-14 07:41:16 EST
- **Examples**: 3
- **Failures**: 0
- **Pending**: 3

### System Specs - Teammates
- **Status**: ✅ Complete (3 pending)
- **Time**: 0.80 seconds (5.99 seconds total with load time)
- **Date/Time**: 2025-11-14 07:42:16 EST
- **Examples**: 3
- **Failures**: 0
- **Pending**: 3

### ENM Specs
- **Status**: ✅ Complete
- **Time**: 34.96 seconds (39.20 seconds total with load time)
- **Date/Time**: 2025-11-14 07:43:16 EST
- **Examples**: 106
- **Failures**: 0

## Total Summary

### Overall Summary
- **Total Examples**: 2,707 (2,476 unit + 125 system + 106 ENM)
- **Total Failures**: 14 ⚠️
- **Total Pending**: 15 (1 model + 1 service + 3 audit + 1 check-in observations + 7 goals + 3 positions_and_seats + 3 teammates)
- **Unit Specs**: ✅ All passing (2,476 examples, 0 failures)
- **System Specs**: ⚠️ 14 failures (all in goals folder)
- **ENM Specs**: ✅ All passing (106 examples)

### Unit Specs Summary
- **Total**: 2,476 examples, 0 failures
  - Models: 995 (1 pending) ✅
  - Controllers: 439 ✅
  - Requests: 185 ✅
  - Decorators: 35 ✅
  - Policies: 187 ✅
  - Services: 326 (1 pending) ✅
  - Queries: 125 ✅
  - Jobs: 67 ✅
  - Forms: 102 ✅
  - Helpers: 82 ✅

### System Specs Summary
- **Total**: 125 examples, 14 failures, 14 pending
  - Abilities: 3 ✅
  - Aspirations: 7 ✅
  - Assignments: 2 ✅
  - Audit: 3 (3 pending) ✅
  - Check-in Observations: 1 (1 pending) ✅
  - Check-ins: 6 ✅
  - Finalization: 3 ✅
  - Goals: 43 (14 failures, 7 pending) ⚠️
  - Huddles: 6 ✅
  - Misc: 31 ✅
  - Observations: 12 ✅
  - Organizations/Teammates: 8 ✅
  - People: 2 ✅
  - Positions and Seats: 3 (3 pending) ✅
  - Teammates: 3 (3 pending) ✅

## Failure Analysis

### Unit Spec Failures
**None!** ✅ All unit specs are passing.

### System Spec Failures (14 total)

#### Goals System Specs (14 failures)

**All failures in**: `spec/system/goals/goal_link_creation_spec.rb` and `spec/system/goals/goals_crud_flow_spec.rb`

**Error**: `Capybara::Ambiguous: Ambiguous match, found 2 elements matching visible button "Create Links" that is not disabled`

**Root Cause**: The goal link creation forms have duplicate "Create Links" buttons on the page, causing Capybara to be unable to determine which button to click. This is a UI issue where there are 2 buttons with the same text and visibility state.

**Affected Tests**:
1. `Goals CRUD Flow Goal Linking Workflow creates a link between goals` (goals_crud_flow_spec.rb:422)
2. `Goal Link Creation error handling returns to return_url without creating links when cancel is clicked` (goal_link_creation_spec.rb:380)
3. `Goal Link Creation error handling redirects to return_url after successful creation` (goal_link_creation_spec.rb:368)
4. `Goal Link Creation error handling displays validation errors on overlay page` (goal_link_creation_spec.rb:358)
5. `Goal Link Creation combining existing + bulk creation allows selecting existing goals AND entering bulk titles in one submission` (goal_link_creation_spec.rb:335)
6. `Goal Link Creation selecting existing goals (outgoing links) creates multiple links when selecting multiple existing goals` (goal_link_creation_spec.rb:124)
7. `Goal Link Creation selecting existing goals (outgoing links) creates a link when selecting a single existing goal` (goal_link_creation_spec.rb:108)
8. `Goal Link Creation selecting existing goals (outgoing links) shows validation error when no goals selected and no bulk titles provided` (goal_link_creation_spec.rb:142)
9. `Goal Link Creation creating new goals via bulk creation (outgoing links) creates new goals with no target dates` (goal_link_creation_spec.rb:252)
10. `Goal Link Creation creating new goals via bulk creation (outgoing links) shows validation error when bulk titles are blank` (goal_link_creation_spec.rb:287)
11. `Goal Link Creation creating new goals via bulk creation (outgoing links) creates new goals as quantitative_key_result for outgoing links` (goal_link_creation_spec.rb:219)
12. `Goal Link Creation creating new goals via bulk creation (outgoing links) accepts multiple goal titles in textarea (one per line)` (goal_link_creation_spec.rb:203)
13. `Goal Link Creation creating new goals via bulk creation (outgoing links) automatically links new goals to current goal` (goal_link_creation_spec.rb:270)
14. `Goal Link Creation creating new goals via bulk creation (outgoing links) creates new goals matching owner and privacy_level of linking goal` (goal_link_creation_spec.rb:235)

**Plan of Action**:
1. Review the goal link creation view templates to identify where duplicate "Create Links" buttons are being rendered
2. Check if there are multiple forms on the same page (e.g., one for existing goals, one for bulk creation)
3. Add unique identifiers (data attributes, IDs, or classes) to distinguish between the buttons
4. Update the system specs to use more specific selectors (e.g., `find('button[data-action="create-existing-links"]')` or `find('button[data-action="create-bulk-links"]')`)
5. Alternatively, if both buttons should be present but only one should be visible at a time, ensure proper visibility logic
6. Consider using `within` blocks in specs to scope button clicks to specific form sections
7. Re-run the goals system specs to verify fixes

**Specific Fix Steps**:
1. Examine `app/views/organizations/goal_links/new_outgoing_link.html.haml` and `new_incoming_link.html.haml` for duplicate buttons
2. Check if there's a partial or shared form that's being rendered multiple times
3. Add unique `id` or `data-test-id` attributes to each button
4. Update all 14 failing specs to use the specific button selector
5. Verify that the UI still works correctly after changes
6. Re-run `bundle exec rspec spec/system/goals/` to confirm all fixes

## Notes

- **Unit Specs**: ✅ Excellent - all passing! (2,476 examples, 0 failures)
- **System Specs**: 14 failures all related to ambiguous button selection in goal link creation - UI/test selector issue
- **ENM Specs**: ✅ All passing (106 examples)
- **Pending Tests**: 15 total - these are intentionally skipped with `xit` and don't affect suite status
- **Total Execution Time**: Approximately 25-30 minutes for full suite when run in segments

## Next Steps

### Priority 1: Fix Goals System Spec Failures (14 failures)
1. Review goal link creation view templates for duplicate buttons
2. Add unique identifiers to distinguish between buttons
3. Update system specs to use specific selectors
4. Verify UI functionality after changes
5. Re-run goals system specs to confirm fixes

### Priority 2: Review Pending Tests
- Review the 15 pending tests to determine if they should be:
  - Implemented and enabled
  - Removed if no longer relevant
  - Left as-is if intentionally skipped for future work
