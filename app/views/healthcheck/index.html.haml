%h1 Healthcheck

%h2 Environment
%p
  Rails Environment: 
  %strong= @rails_env

%h2 Database Status
%p
  Status: 
  %strong= @db_status
%p
  People in DB: 
  %strong= @person_count
- if @db_error
  %p
    Database Error: 
    %strong{style: "color: red;"}= @db_error

- if @show_env_vars
  %h2 Environment Variables (Names and Character Counts)
  - if @env_vars.any?
    %ul
      - @env_vars.each do |var|
        %li
          =var
  - else
    %p No relevant environment variables found
  %p
    %small.text-muted
      Add 
      %code ?show_env_vars=true
      to the URL to see this section

%h2 Health Check Links
.row.mt-4
  .col-md-6.mb-3
    = link_to healthcheck_oauth_path, class: "btn btn-lg btn-primary w-100 d-flex align-items-center justify-content-center", style: "min-height: 80px;" do
      %i.bi.bi-shield-check.me-2{style: "font-size: 2rem;"}
      %div
        %div OAuth Health Check
        %small.text-white-50 OAuth configuration and status
  .col-md-6.mb-3
    = link_to healthcheck_search_path, class: "btn btn-lg btn-info w-100 d-flex align-items-center justify-content-center", style: "min-height: 80px;" do
      %i.bi.bi-search.me-2{style: "font-size: 2rem;"}
      %div
        %div Search Index Health
        %small.text-white-50 PgSearch index status
  .col-md-6.mb-3
    = link_to healthcheck_notification_api_path, class: "btn btn-lg btn-success w-100 d-flex align-items-center justify-content-center", style: "min-height: 80px;" do
      %i.bi.bi-bell.me-2{style: "font-size: 2rem;"}
      %div
        %div NotificationAPI Health
        %small.text-white-50 SMS notification service
  .col-md-6.mb-3
    = link_to healthcheck_giphy_path, class: "btn btn-lg btn-warning w-100 d-flex align-items-center justify-content-center", style: "min-height: 80px;" do
      %i.bi.bi-image.me-2{style: "font-size: 2rem;"}
      %div
        %div GIPHY Health
        %small.text-white-50 GIF search service

%h2 Rails URL Configuration
%p
  Action Mailer Default URL Options: 
  %strong= @action_mailer_url_options.inspect
%p
  Action Controller Default URL Options: 
  %strong= @action_controller_url_options.inspect
%p
  URL Options Debug: 
  %strong= @url_options_debug
%p
  ENV RAILS_HOST: 
  %strong= @env_host
%p
  ENV RAILS_ACTION_MAILER_DEFAULT_URL_PROTOCOL: 
  %strong= @env_protocol
%p
  Test URL Generated: 
  %strong{class: @url_generation_works ? "text-success" : "text-danger"}= @test_url_generated
%p
  URL Generation Works: 
  %strong{class: @url_generation_works ? "text-success" : "text-danger"}= @url_generation_works ? "YES" : "NO"
%p
  Routes Loaded: 
  %strong= @routes_loaded
%p
  Routes Count: 
  %strong= @routes_count
