%h1 NotificationAPI Health Check

= link_to healthcheck_index_path, class: "btn btn-secondary mb-4" do
  %i.bi.bi-arrow-left.me-2
  Back to Healthcheck

.card.mb-4
  .card-header
    %h5.mb-0
      %i.bi.bi-bell.me-2
      NotificationAPI
  .card-body
    - if @notification_api_configured
      .alert.alert-success.mb-3
        %i.bi.bi-check-circle.me-2
        NotificationAPI credentials configured
      
      .mb-3{"data-controller": "notification-api-test"}
        %h6 Test SMS Notification
        %p.text-muted.small
          Send a test "Hello, world!" SMS message to verify the NotificationAPI connection.
        
        .mb-3
          %label.form-label{for: "phoneNumber"}
            Phone Number
          %input.form-control#phoneNumber{type: "text", placeholder: "+13172898859", value: "+13172898859", "data-notification-api-test-target": "phoneNumber"}
          %small.form-text.text-muted
            Enter phone number in E.164 format (e.g., +15005550006)
        
        %button.btn.btn-primary#testNotificationApiBtn{data: {action: "click->notification-api-test#testNotification"}}
          %i.bi.bi-send.me-2
          Send Test Message
        #notificationApiResult.mt-3
    - else
      .alert.alert-warning
        %i.bi.bi-exclamation-triangle.me-2
        NotificationAPI not configured
        %p.mb-0.mt-2.small
          Please set the following environment variables:
          %br
          %code NOTIFICATION_API_CLIENT_ID
          %br
          %code NOTIFICATION_API_CLIENT_SECRET

