- content_for :title, "Help Improve OurGruuv"

- if @return_url.present?
  - content_for :return_url, @return_url
- if @return_text.present?
  - content_for :return_text, @return_text

- content_for :header do
  %h1.mb-0
    %i.bi.bi-lightbulb.me-2
    Help Improve OurGruuv
  %small.text-muted Product roadmap and feedback

/ Interests Section
.row.justify-content-center.mb-4
  .col-lg-12
    .card.border-0.shadow-sm
      .card-header
        %h5.mb-0
          %i.bi.bi-heart.me-2
          Your Ideas & Feedback
      .card-body
        .row
          / Left side - 3 columns - Help Improve button
          .col-md-3
            = link_to new_interest_submission_path, class: "btn btn-primary btn-lg w-100 mb-3" do
              %i.bi.bi-lightbulb.me-2
              Help Improve OurGruuv
            %p.text-muted
              At OurGruuv, we value iteration and closeness with those who believe what we believe. The more clear we are, the higher the likelihood of reaching a team flow state, which will lead to more productivity, more fun, and everyone getting their gruuv on!
          
          / Right side - 9 columns - User's interest submissions
          .col-md-9
            - if @interest_submissions.any?
              %h6.mb-3
                - if current_person&.og_admin?
                  All Interest Submissions
                - else
                  Your Interest Submissions
              .list-group
                - @interest_submissions.each do |submission|
                  = link_to submission, class: "list-group-item list-group-item-action" do
                    .d-flex.w-100.justify-content-between
                      %div
                        %h6.mb-1= submission.source_page.humanize
                        - if current_person&.og_admin? && submission.person
                          %small.text-muted
                            %i.bi.bi-person.me-1
                            = submission.person.display_name
                      %small.text-muted= format_date_in_user_timezone(submission.created_at)
                    %p.mb-1
                      - if submission.thing_interested_in.present?
                        %strong Interested in:
                        = truncate(submission.thing_interested_in, length: 100)
                      - elsif submission.why_interested.present?
                        %strong Why interested:
                        = truncate(submission.why_interested, length: 100)
                      - else
                        %em.text-muted No details provided
              
              / Pagination for interest submissions
              - if @interest_pagy && @interest_pagy.pages > 1
                .d-flex.justify-content-center.mt-3
                  = raw pagy_nav(@interest_pagy, param_name: :interest_page)
            - else
              .text-center.py-4
                %i.bi.bi-heart.text-muted{style: "font-size: 2rem;"}
                %p.text-muted.mt-2
                  - if current_person
                    - if current_person.og_admin?
                      No interest submissions have been submitted yet.
                    - else
                      You haven't submitted any ideas yet. Click the button to get started!
                  - else
                    Login or create an account to submit your ideas and help improve OurGruuv.

/ Change Logs Section
.row.justify-content-center.mb-4
  .col-lg-12
    .card.border-0.shadow-sm
      .card-header.d-flex.justify-content-between.align-items-center
        %h5.mb-0
          %i.bi.bi-clock-history.me-2
          Recent Changes
        - if current_person&.og_admin?
          = link_to new_change_log_path, class: "btn btn-sm btn-primary" do
            %i.bi.bi-plus.me-1
            New Change Log
      .card-body
        / Spotlight Section
        .row.text-center.mb-4
          .col-3
            .h3.text-spice-1= @spotlight_stats[:new_value]
            %small.text-muted New Value
          .col-3
            .h3.text-spice-2= @spotlight_stats[:major_enhancement]
            %small.text-muted Major Enhancement
          .col-3
            .h3.text-spice-3= @spotlight_stats[:minor_enhancement]
            %small.text-muted Minor Enhancement
          .col-3
            .h3.text-spice-4= @spotlight_stats[:bug_fix]
            %small.text-muted Bug Fix
        %small.text-muted.mb-3 Changes in the past 90 days

/ Pagination Info
.row.justify-content-center.mb-2
  .col-lg-12
    .d-flex.justify-content-between.align-items-center
      %small.text-muted= raw pagy_info(@pagy) if @pagy

/ Change Logs List
.row.justify-content-center
  .col-lg-12
    - if @change_logs&.any?
      - @change_logs.each do |change_log|
        .card.mb-3
          .card-body
            .row
              / Left side - 3 columns - Image
              .col-md-3
                - if change_log.image_url.present?
                  = image_tag change_log.image_url, alt: "Change log image", class: "img-fluid rounded"
                - else
                  .text-center.text-muted.py-5
                    %i.bi.bi-image{style: "font-size: 3rem;"}
                    %p.mt-2 No image
              
              / Right side - 9 columns - Description and details
              .col-md-9
                .d-flex.justify-content-between.align-items-start.mb-2
                  %div
                    %h5.mb-1
                      %span.badge{class: "bg-#{change_log.change_type == 'new_value' ? 'primary' : change_log.change_type == 'major_enhancement' ? 'success' : change_log.change_type == 'minor_enhancement' ? 'info' : 'warning'}"}
                        = change_log.change_type.humanize
                    %small.text-muted.ms-2
                      %i.bi.bi-calendar.me-1
                      = change_log.launched_on.strftime("%B %d, %Y")
                  - if current_person&.og_admin?
                    = link_to edit_change_log_path(change_log), class: "btn btn-sm btn-outline-secondary" do
                      %i.bi.bi-pencil.me-1
                      Edit
                
                .markdown-content
                  = render_markdown(change_log.description)
                
                = link_to "View Details", change_log, class: "btn btn-sm btn-outline-primary mt-2"
      
      / Pagination
      - if @pagy
        .d-flex.justify-content-center.mt-4
          = raw pagy_nav(@pagy) if @pagy.pages > 1
    - else
      .text-center.py-5
        %i.bi.bi-clock-history.text-muted{style: "font-size: 3rem;"}
        %h5.text-muted.mt-3 No Change Logs Yet
        %p.text-muted Check back soon for updates!
