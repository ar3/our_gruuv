- content_for :title, "New Huddle"

.container.mt-4
  .row.justify-content-center
    .col-md-8
      .card
        .card-header
          %h2.mb-0 Start a #{see_20_label_with_tooltip} Huddle
        .card-body
          %p.lead.mb-4
            Help your team find their groove! Select a team to start collecting structured feedback for continuous improvement.
          
          .alert.alert-info.mb-4
            %i.bi.bi-person-check.me-2
            %strong Welcome, #{@current_person.display_name}!
            %br
            %small Select a team below to start a huddle.
          
          - if @teams_by_company.empty?
            .alert.alert-warning
              %i.bi.bi-exclamation-triangle.me-2
              You are not a member of any companies with teams yet.
              %br
              %small Contact your administrator to be added to a team.
          - else
            %h5.mb-3 Select a Team
            
            - @teams_by_company.each do |company, teams|
              .card.mb-3
                .card-header.bg-light
                  %h6.mb-0
                    %i.bi.bi-building.me-2
                    = company.name
                .list-group.list-group-flush
                  - teams.each do |team|
                    = button_to start_huddle_from_team_huddles_path(team_id: team.id), method: :post, class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center", data: { turbo: false } do
                      .d-flex.align-items-center
                        %i.bi.bi-people.me-3.text-primary
                        %span.fw-medium= team.name
                      %span.badge.bg-primary.rounded-pill
                        %i.bi.bi-play-fill.me-1
                        Start Huddle
          
          .d-grid.gap-2.d-md-flex.justify-content-md-start.mt-4
            = link_to "Cancel", huddles_path, class: "btn btn-outline-secondary"
