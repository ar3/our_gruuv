- content_for :title, "Edit Aspiration"

- content_for :go_back_link do
  = link_to organization_aspiration_path(@organization, @aspiration), class: "go-back-link" do
    %i.bi.bi-arrow-left.me-2
    Back to Aspiration

%div.container-fluid
  %div.row
    %div.col-12
      %div.d-flex.justify-content-between.align-items-center.mb-4
        %h1 Edit Aspiration
      
      %div.card
        %div.card-body
          = form_with model: [@organization, @form], url: organization_aspiration_path(@organization, @aspiration), local: true do |form|
            - if @form.errors.any?
              %div.alert.alert-danger
                %h4= "#{pluralize(@form.errors.count, "error")} prohibited this aspiration from being saved:"
                %ul.mb-0
                  - @form.errors.full_messages.each do |message|
                    %li= message
            
            .mb-3
              = form.label :department_id, "Department", class: "form-label"
              = form.select :department_id, options_from_collection_for_select(@departments, :id, :display_name, @aspiration.department_id), { include_blank: "Company-wide (no department)" }, { class: "form-select" }
              %small.form-text.text-muted The department this aspiration belongs to (optional)
            
            %div.mb-3
              = form.label :name, class: 'form-label'
              = form.text_field :name, class: 'form-control'
            
            %div.mb-3
              = form.label :description, class: 'form-label'
              = form.text_area :description, class: 'form-control', rows: 4
            
            %div.mb-3
              = form.label :sort_order, class: 'form-label'
              = form.number_field :sort_order, class: 'form-control'
            
            = render 'shared/semantic_version_section', 
              form: form, 
              version_section_title: @aspiration_decorator.version_section_title_for_context, 
              version_section_description: @aspiration_decorator.version_section_description_for_context, 
              version_options: @aspiration_decorator.edit_version_options
            
            %div
              = form.submit 'Update Aspiration', class: 'btn btn-primary'
              = link_to 'Cancel', organization_aspiration_path(@organization, @aspiration), class: 'btn btn-outline-secondary ms-2'
