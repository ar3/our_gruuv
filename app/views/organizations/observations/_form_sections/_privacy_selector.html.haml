- allowed_levels ||= Observation.privacy_levels.keys
- disabled_levels ||= {}

= form.label :privacy_level, "Privacy Level", class: 'form-label'
- Observation.privacy_levels.keys.each do |key|
  - is_allowed = allowed_levels.nil? || allowed_levels.include?(key.to_sym)
  - disabled_message = disabled_levels[key.to_sym]
  
  .form-check
    = form.radio_button :privacy_level, key, class: 'form-check-input', disabled: !is_allowed
    = form.label :"privacy_level_#{key}", class: "form-check-label #{'text-muted' unless is_allowed}" do
      - case key
      - when 'observer_only'
        ğŸ”’ Just for me (Journal)
      - when 'observed_only'
        ğŸ‘¤ Just for their eyes only
      - when 'managers_only'
        ğŸ‘” Just for their manager's eyes only
      - when 'observed_and_managers'
        ğŸ‘¥ For them and their managers
      - when 'public_to_company'
        ğŸ¢ Public to company
      - when 'public_to_world'
        ğŸŒ Public to world
    
    - if disabled_message
      %small.text-muted.d-block.ms-4= disabled_message

