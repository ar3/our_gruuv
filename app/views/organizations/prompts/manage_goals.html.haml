- content_for :title, "Create New Goals"

- content_for :header do
  Create new goals and associate with "#{@prompt.prompt_template.title}"

- content_for :return_url do
  = @return_url || edit_organization_prompt_path(@organization, @prompt)

- content_for :return_text do
  = @return_text || "Back to Prompt"

.card.mb-3
  .card-header
    %h5.mb-0
      %i.bi.bi-bullseye.me-2
      Create new goals
      %small.text-muted.ms-2
        Each goal will be created and associated with this prompt.
  .card-body
    = form_with url: organization_prompt_prompt_goals_path(@organization, @prompt), method: :post, local: true do |f|
      = hidden_field_tag :return_url, @return_url if @return_url.present?
      = hidden_field_tag :return_text, @return_text if @return_text.present?

      .mb-4
        %label.form-label.fw-bold
          Create New Goals
          %i.bi.bi-info-circle.text-muted.ms-2{
            "data-bs-toggle" => "tooltip",
            "data-bs-title" => "Create nested goals: Regular lines create goals. Lines starting with numbers, *, •, -, –, or .. create sub-goals linked to the previous goal. A goal followed by sub-goals becomes an objective."
          }
        %small.text-muted.d-block.mb-2
          Enter one goal per line. Each goal will be created as a stepping stone goal with a due date 90 days from now.
        = text_area_tag "bulk_goal_titles", nil,
                        class: "form-control",
                        rows: 6,
                        placeholder: "Goal 1\n1. Stepping Stone 1-1\n2. Stepping Stone 1-2\n3. Stepping Stone 1-3\nGoal 2\nObjective 3\n* Key Result 3-1\n* Key Result 3-2\n* Key Result 3-3\nObjective 4\n1. Step 4-1\n2. Step 4-2\n3. Step 4-3"

      .d-flex.gap-2.mt-3
        = link_to @return_url, class: 'btn btn-outline-secondary' do
          %i.bi.bi-arrow-left.me-1
          = @return_text || 'Cancel'
        = f.submit 'Create and associate goals', class: 'btn btn-primary', id: 'create-and-associate-goals-btn', data: { test_id: 'create-and-associate-goals' }

