.dropdown
  %button.btn.btn-outline-primary.btn-sm.dropdown-toggle{"data-bs-toggle" => "dropdown", "aria-expanded" => "false", type: "button"}
    %i.bi.bi-eye.me-2
    = abilities_current_view_name
  %ul.dropdown-menu
    %li
      - if action_name == 'show'
        .dropdown-item.text-muted
          %i.bi.bi-eye.me-2
          View Mode (Active)
          %i.bi.bi-check-circle.text-success.ms-2
      - else
        = link_to organization_ability_path(@organization, @ability), class: 'dropdown-item' do
          %i.bi.bi-eye.me-2
          View Mode
      
    %li
      - if action_name == 'edit'
        .dropdown-item.text-muted
          %i.bi.bi-pencil.me-2
          Edit Mode (Active)
          %i.bi.bi-check-circle.text-success.ms-2
      - elsif policy(@ability).update?
        = link_to edit_organization_ability_path(@organization, @ability), class: 'dropdown-item' do
          %i.bi.bi-pencil.me-2
          Edit Mode
      - else
        .dropdown-item.text-muted.disabled
          %i.bi.bi-pencil.me-2
          Edit Mode
          %i.bi.bi-exclamation-triangle.text-warning.ms-2{"data-bs-toggle" => "tooltip", "data-bs-title" => "You need MAAP management permissions for this organization to edit abilities"}
    %li
      = link_to organization_public_maap_ability_path(@organization, @ability), class: 'dropdown-item' do
        %i.bi.bi-globe.me-2
        Public version
    - if @ability.archived?
      - if policy(@ability).restore?
        %li
          = link_to restore_organization_ability_path(@organization, @ability), class: 'dropdown-item', data: { turbo_method: :patch, turbo_confirm: 'Restore this ability? It will appear in lists and selectors again.' } do
            %i.bi.bi-arrow-counterclockwise.me-2
            Restore ability
    - elsif policy(@ability).archive?
      %li
        = link_to archive_organization_ability_path(@organization, @ability), class: 'dropdown-item' do
          %i.bi.bi-archive.me-2
          Archive ability
