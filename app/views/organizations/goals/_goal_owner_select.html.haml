-# Shared goal owner dropdown: same sort order everywhere (viewing teammate, teammates alphabetically, company, departments hierarchically+alphabetically, teams).
-# Local variables: options (array of [label, value]), selected_value, include_filter_options (default: false â€” when false, excludes "All goals visible to everyone" and "All goals created by me"; set true only for index filter), name (default: 'owner_id'), id (optional), select_class (default: 'form-select'), required (default: false), html_options (hash, optional)
- options = local_assigns[:options] || []
- include_filter_options = local_assigns.fetch(:include_filter_options, false)
- options = options.reject { |_label, value| value.in?(%w[everyone_in_company created_by_me]) } unless include_filter_options
- selected_value = local_assigns[:selected_value]
- name = local_assigns[:name] || 'owner_id'
- id = local_assigns[:id]
- select_class = local_assigns[:select_class] || 'form-select'
- required = local_assigns.fetch(:required, false)
- html_options = local_assigns[:html_options] || {}
- select_attrs = { class: select_class }.merge(html_options)
- select_attrs[:id] = id if id.present?
- select_attrs[:required] = true if required
= select_tag name, options_for_select(options, selected_value), select_attrs
