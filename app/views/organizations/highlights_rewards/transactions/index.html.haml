- content_for :title, "Highlights Transactions"

- content_for :header do
  .d-flex.align-items-center
    %h1.mb-0.me-2
      %i.bi.bi-list-check.me-2
      Highlights Transactions

- content_for :go_back_link do
  = link_to highlights_points_organization_company_teammate_path(@organization, current_company_teammate), class: "go-back-link" do
    %i.bi.bi-arrow-left.me-2
    Back to Highlight Points

.row.mb-4
  .col-md-6.mb-3.mb-md-0
    .card.bg-light
      .card-body.py-2
        .d-flex.justify-content-between.align-items-center
          %span.text-muted Points to Give
          %strong.text-primary= @ledger.points_to_give

  .col-md-6
    .card.bg-light
      .card-body.py-2
        .d-flex.justify-content-between.align-items-center
          %span.text-muted Points to Spend
          %strong.text-success= @ledger.points_to_spend

.card
  .card-header
    %h5.mb-0
      %i.bi.bi-clock-history.me-2
      Transaction History

  .card-body
    - if @transactions.any?
      .table-responsive
        %table.table.table-hover.mb-0
          %thead
            %tr
              %th Date
              %th Type
              %th Description
              %th.text-end To Give
              %th.text-end To Spend
          %tbody
            - @transactions.each do |transaction|
              %tr
                %td
                  = transaction.created_at.strftime("%b %d, %Y")
                  %br
                  %small.text-muted= transaction.created_at.strftime("%I:%M %p")
                %td
                  %span.badge.bg-secondary= transaction.transaction_type_display
                %td= highlights_transaction_description(transaction)
                %td.text-end{class: highlights_delta_class(transaction.points_to_give_delta)}
                  = highlights_format_delta(transaction.points_to_give_delta)
                %td.text-end{class: highlights_delta_class(transaction.points_to_spend_delta)}
                  = highlights_format_delta(transaction.points_to_spend_delta)

      - if @pagy.pages > 1
        .mt-3
          == pagy_nav(@pagy)
    - else
      .text-center.py-4
        %i.bi.bi-inbox.fs-1.text-muted
        %p.text-muted.mt-2 No transactions yet.
