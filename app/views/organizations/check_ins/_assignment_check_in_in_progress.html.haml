-# Assignment Check-In Form Fields
= form.fields_for :assignment_check_ins, check_in, index: check_in.id do |af|
  .row
    - if view_mode == :employee || view_mode.nil?
      .col-md-6
        %h5 Employee Assessment
        .form-group
          = af.label :employee_rating, "Rating"
          = af.select :employee_rating, 
                      assignment_rating_options,
                      { include_blank: 'Select rating' },
                      class: 'form-control'

        .form-group
          = af.label :actual_energy_percentage, "Actual Energy %"
          = af.number_field :actual_energy_percentage, 
                            min: 0, max: 100,
                            class: 'form-control',
                            placeholder: '0-100'

        .form-group
          = af.label :employee_personal_alignment, "Personal Alignment"
          = af.select :employee_personal_alignment,
                      [['Love', 'love'], ['Like', 'like'], ['Neutral', 'neutral'], ['Prefer Not', 'prefer_not'], ['Only if Necessary', 'only_if_necessary']],
                      { include_blank: 'Select alignment' },
                      class: 'form-control'

        .form-group
          = af.label :employee_private_notes, "Private Notes"
          = af.text_area :employee_private_notes, 
                         rows: 3,
                         class: 'form-control',
                         placeholder: 'Your thoughts on this assignment...'

    - if view_mode == :manager || view_mode.nil?
      .col-md-6
        %h5 Manager Assessment
        .form-group
          = af.label :manager_rating, "Rating"
          = af.select :manager_rating, 
                      assignment_rating_options,
                      { include_blank: 'Select rating' },
                      class: 'form-control'

        .form-group
          = af.label :manager_private_notes, "Private Notes"
          = af.text_area :manager_private_notes, 
                         rows: 3,
                         class: 'form-control',
                         placeholder: 'Your assessment of this assignment...'

  -# Hidden fields
  = af.hidden_field :assignment_id, value: check_in.assignment.id

  -# Status radio buttons
  .form-group.mt-3
    %label Status
    .form-check
      = af.radio_button :status, 'draft', 
                        checked: (check_in.status == 'draft' || check_in.status.nil?),
                        class: 'form-check-input'
      = af.label :status_draft, 'Save as Draft', class: 'form-check-label'
    .form-check
      = af.radio_button :status, 'complete', 
                        checked: check_in.status == 'complete',
                        class: 'form-check-input'
      = af.label :status_complete, 'Mark Ready', class: 'form-check-label'

    .small.text-muted.mt-1
      - if view_mode == :employee
        Select "Mark Ready" when you're done with your assessment
      - elsif view_mode == :manager
        Select "Mark Ready" when you're done with your assessment
      - else
        Select "Mark Ready" when both assessments are complete
