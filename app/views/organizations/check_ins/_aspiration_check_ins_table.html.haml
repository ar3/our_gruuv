-# Aspiration Check-Ins Table View with Interactive Forms
- if aspiration_check_ins&.any?
  - if aspiration_check_ins.any?(&:officially_completed?)
    = render 'aspiration_check_ins_table_completed', check_ins: aspiration_check_ins
  - elsif aspiration_check_ins.any?(&:ready_for_finalization?)
    = render 'aspiration_check_ins_table_ready_for_finalization', check_ins: aspiration_check_ins, form: form, view_mode: view_mode
  - elsif view_mode == :manager && aspiration_check_ins.any?(&:manager_completed?)
    = render 'aspiration_check_ins_table_manager_completed', check_ins: aspiration_check_ins, form: form
  - elsif view_mode == :employee && aspiration_check_ins.any?(&:employee_completed?)
    = render 'aspiration_check_ins_table_employee_completed', check_ins: aspiration_check_ins, form: form
  - else
    .table-responsive
      %table.table.table-striped
        %thead
          %tr
            %th Aspiration
            - if view_mode == :employee || view_mode.nil?
              %th Employee Rating
              %th Employee Notes
            - if view_mode == :manager || view_mode.nil?
              %th Manager Rating
              %th Manager Notes
            %th Status
        %tbody
          - aspiration_check_ins.each do |check_in|
            = form.fields_for :aspiration_check_ins, check_in, index: check_in.id do |af|
              %tr
                %td= check_in.aspiration.name
                - if view_mode == :employee || view_mode.nil?
                  %td
                    = af.select :employee_rating, 
                                aspiration_rating_options,
                                { include_blank: 'Select rating' },
                                class: 'form-control form-control-sm'
                  %td
                    = af.text_area :employee_private_notes, 
                                   rows: 2,
                                   class: 'form-control form-control-sm',
                                   placeholder: 'Employee notes...'
                - if view_mode == :manager || view_mode.nil?
                  %td
                    = af.select :manager_rating, 
                                aspiration_rating_options,
                                { include_blank: 'Select rating' },
                                class: 'form-control form-control-sm'
                  %td
                    = af.text_area :manager_private_notes, 
                                   rows: 2,
                                   class: 'form-control form-control-sm',
                                   placeholder: 'Manager notes...'
                %td
                  = af.hidden_field :aspiration_id, value: check_in.aspiration.id
                  .form-check
                    = af.radio_button :status, 'draft', 
                                      checked: (check_in.status == 'draft' || check_in.status.nil?),
                                      class: 'form-check-input'
                    = af.label :status_draft, 'Draft', class: 'form-check-label'
                  .form-check
                    = af.radio_button :status, 'complete', 
                                      checked: check_in.status == 'complete',
                                      class: 'form-check-input'
                    = af.label :status_complete, 'Complete', class: 'form-check-label'
- else
  .alert.alert-info
    %i.bi.bi-info-circle.me-2
    No aspirations available to do a check-in on