-# Assignment Check-In Table View - Ready for Finalization State
.alert.alert-success.mb-3
  %i.bi.bi-check-circle.me-2
  %strong All assignment assessments are complete! Ready for finalization.

.table-responsive
  %table.table.table-striped
    %thead
      %tr
        %th Assignment
        %th Employee Rating
        %th Energy %
        %th Alignment
        %th Employee Notes
        %th Manager Rating
        %th Manager Notes
        %th Actions
    %tbody
      - check_ins.each do |check_in|
        - if check_in.ready_for_finalization?
          %tr
            %td= check_in.assignment.display_name
            %td= assignment_rating_display(check_in.employee_rating)
            %td= check_in.actual_energy_percentage
            %td= check_in.employee_personal_alignment
            %td= simple_format(check_in.employee_private_notes)
            %td= assignment_rating_display(check_in.manager_rating)
            %td= simple_format(check_in.manager_private_notes)
            %td
              - confirm_message = view_mode == :manager ? 'Are you ready to finalize this check-in? This will create the official rating.' : 'Your manager will review both assessments and set the official rating.'
              = link_to "Go to Finalization", organization_person_finalization_path(@organization, @person), 
                        class: 'btn btn-success btn-sm',
                        data: { confirm: confirm_message }

.small.text-muted.mt-2.text-center
  - if view_mode == :manager
    This will allow you to set the official rating and create a MAAP snapshot.
  - else
    Your manager will review both assessments and set the official rating.
