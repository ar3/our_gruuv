-# Position Check-Ins Table View with Interactive Forms
- if position_check_in
  - if position_check_in.officially_completed?
    = render 'position_check_ins_table_completed', check_in: position_check_in
  - elsif position_check_in.ready_for_finalization?
    = render 'position_check_ins_table_ready_for_finalization', check_in: position_check_in, form: form, view_mode: view_mode
  - elsif view_mode == :manager && position_check_in.manager_completed?
    = render 'position_check_ins_table_manager_completed', check_in: position_check_in, form: form
  - elsif view_mode == :employee && position_check_in.employee_completed?
    = render 'position_check_ins_table_employee_completed', check_in: position_check_in, form: form
  - else
    = form.fields_for :position_check_in do |pf|
      .table-responsive
        %table.table.table-striped
          %thead
            %tr
              %th Position
              - if view_mode == :employee || view_mode.nil?
                %th Employee Rating
                %th Employee Notes
              - if view_mode == :manager || view_mode.nil?
                %th Manager Rating
                %th Manager Notes
              %th Status
          %tbody
            %tr
              %td= position_check_in.employment_tenure.position.display_name
              - if view_mode == :employee || view_mode.nil?
                %td
                  = pf.select :employee_rating, 
                              position_rating_options,
                              { selected: position_check_in.employee_rating, include_blank: 'Select rating' },
                              class: 'form-control form-control-sm'
                %td
                  = pf.text_area :employee_private_notes, 
                                 rows: 2,
                                 value: position_check_in.employee_private_notes,
                                 class: 'form-control form-control-sm',
                                 placeholder: 'Employee notes...'
              - if view_mode == :manager || view_mode.nil?
                %td
                  = pf.select :manager_rating, 
                              position_rating_options,
                              { selected: position_check_in.manager_rating, include_blank: 'Select rating' },
                              class: 'form-control form-control-sm'
                %td
                  = pf.text_area :manager_private_notes, 
                                 rows: 2,
                                 value: position_check_in.manager_private_notes,
                                 class: 'form-control form-control-sm',
                                 placeholder: 'Manager notes...'
              %td
                .form-check
                  = pf.radio_button :status, 'draft', 
                                    checked: (position_check_in.status == 'draft' || position_check_in.status.nil?),
                                    class: 'form-check-input'
                  = pf.label :status_draft, 'Draft', class: 'form-check-label'
                .form-check
                  = pf.radio_button :status, 'complete', 
                                    checked: position_check_in.status == 'complete',
                                    class: 'form-check-input'
                  = pf.label :status_complete, 'Complete', class: 'form-check-label'
- else
  .alert.alert-info
    %i.bi.bi-info-circle.me-2
    No position available to do a check-in on
