- content_for :title, "Public Kudos"

- content_for :header do
  %h1.mb-0
    %i.bi.bi-gift.me-2
    = "#{@organization.name} Public Kudos"

- content_for :header_action do
  - if current_person
    = link_to organization_observations_path(@organization), class: "btn btn-outline-primary btn-sm" do
      Logged-in view of Observations

- if @observations.any?
  - @observations.each do |observation|
    .mb-4
      / Story section with left border (truncated, no GIFs)
      .markdown-content--bordered.mb-3
        %p.mb-0{style: "font-size: 1.1rem; line-height: 1.6;"}
          = observation.decorate.story_html_truncated(length: 300, omit_gifs: true).html_safe

      / Two-column layout: Attribution (left) and Ratings (right)
      .row.mb-3
        .col-md-6
          = render 'organizations/kudos/ratings', observation: observation, show_feelings: false
        .col-md-6
          = render 'organizations/kudos/attribution', observation: observation, show_date: true, show_full_datetime: false

      / View link
      .text-end
        = link_to "View Full Kudos", organization_kudo_path(@organization, date: observation.observed_at.strftime('%Y-%m-%d'), id: observation.id), class: "btn btn-sm btn-outline-primary"
- else
  .card.mb-4
    .card-body.text-center.py-5
      %p.text-muted.mb-0 No public kudos yet.

