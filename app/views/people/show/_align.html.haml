.card.mb-4{ role: "region", "aria-labelledby": "align-section" }
  .card-header
    %h5.mb-0{ id: "align-section" }
      %i.bi.bi-briefcase.me-2
      Align
  .card-body
    :ruby
      current_company = current_organization
      current_tenure = @employment_tenures.find { |t| t.company == current_company && t.active? }
      first_tenure = @employment_tenures.select { |t| t.company == current_company }.sort_by(&:started_at).first
    
    .row
      .col-md-8
        / Position Sub-section
        .align-subsection.mb-4
          %h6.text-muted.border-bottom.pb-2 Position
          - if current_tenure
            .row
              .col-md-6
                %p.mb-1
                  %strong Current Position:
                  %br
                  = current_tenure.position&.display_name || "No position assigned"
                %p.mb-1
                  %strong Time in Position:
                  %br
                  = distance_of_time_in_words(current_tenure.started_at, Date.current)
              .col-md-6
                %p.mb-1
                  %strong Company Tenure:
                  %br
                  = distance_of_time_in_words(first_tenure.started_at, Date.current)
                %p.mb-1
                  %strong Manager:
                  %br
                  = current_tenure.manager_display || "No manager assigned"
              .row.mt-3
                .col-md-6
                  = link_to edit_person_employment_tenure_path(@person, current_tenure), class: "btn btn-outline-primary" do
                    %i.bi.bi-pencil.me-2
                    Edit Position
                .col-md-6
                  = link_to new_person_employment_tenure_path(@person), class: "btn btn-outline-success" do
                    %i.bi.bi-plus.me-2
                    Change Position
          - else
            %p.text-muted No current position assigned.
            = link_to new_person_employment_tenure_path(@person), class: "btn btn-outline-success" do
              %i.bi.bi-plus.me-2
              Assign Position

        / Assignment Sub-section
        .align-subsection.mb-4
          %h6.text-muted.border-bottom.pb-2 Assignment
          - current_assignment_tenure = @assignment_tenures.find { |t| t.assignment.company == current_company && t.active? }
          - if current_assignment_tenure
            .row
              .col-md-6
                %p.mb-1
                  %strong Current Assignment:
                  %br
                  = current_assignment_tenure.assignment.title
                %p.mb-1
                  %strong Assignment Description:
                  %br
                  = current_assignment_tenure.assignment.tagline || "No description provided"
              .col-md-6
                %p.mb-1
                  %strong Assignment Start:
                  %br
                  = current_assignment_tenure.started_at.strftime('%B %d, %Y')
                %p.mb-1
                  %strong Assignment End:
                  %br
                  - if current_assignment_tenure.ended_at
                    = current_assignment_tenure.ended_at.strftime('%B %d, %Y')
                  - else
                    %span.text-success Ongoing
              .row.mt-3
                .col-md-6
                  = link_to organization_assignment_tenure_path(@person.current_organization_or_default, @person), class: "btn btn-outline-primary" do
                    %i.bi.bi-pencil.me-2
                    Manage Assignments
                .col-md-6
                  = link_to choose_assignments_organization_assignment_tenure_path(@person.current_organization_or_default, @person), class: "btn btn-outline-success" do
                    %i.bi.bi-plus.me-2
                    Add Assignment
          - else
            %p.text-muted No current assignment.
            = link_to choose_assignments_organization_assignment_tenure_path(@person.current_organization_or_default, @person), class: "btn btn-outline-success" do
              %i.bi.bi-plus.me-2
              Add Assignment

      .col-md-4.border-start.border-secondary
        .d-grid.gap-3
          / Position Actions
          .action-group.d-grid.gap-2
            .d-flex.align-items-center.gap-2
              .flex-grow-1
                %button.btn.btn-outline-secondary.w-100.disabled{disabled: true, data: { action: 'click->coming-soon#show' }}
                  %i.bi.bi-clipboard-data.me-2
                  View Position History
              %i.bi.bi-cone-striped.text-warning{ data: { bs_toggle: "tooltip", bs_title: "Coming Soon: View position history and changes" } }
            .d-flex.align-items-center.gap-2
              .flex-grow-1
                %button.btn.btn-outline-secondary.w-100.disabled{disabled: true, data: { action: 'click->coming-soon#show' }}
                  %i.bi.bi-gear.me-2
                  Position Settings
              %i.bi.bi-cone-striped.text-warning{ data: { bs_toggle: "tooltip", bs_title: "Coming Soon: Configure position settings and requirements" } }

          / Assignment Actions
          .action-group.d-grid.gap-2
            .d-flex.align-items-center.gap-2
              .flex-grow-1
                %button.btn.btn-outline-secondary.w-100.disabled{disabled: true, data: { action: 'click->coming-soon#show' }}
                  %i.bi.bi-briefcase.me-2
                  View Assignment History
              %i.bi.bi-cone-striped.text-warning{ data: { bs_toggle: "tooltip", bs_title: "Coming Soon: View assignment history and changes" } }
            .d-flex.align-items-center.gap-2
              .flex-grow-1
                %button.btn.btn-outline-secondary.w-100.disabled{disabled: true, data: { action: 'click->coming-soon#show' }}
                  %i.bi.bi-gear.me-2
                  Assignment Settings
              %i.bi.bi-cone-striped.text-warning{ data: { bs_toggle: "tooltip", bs_title: "Coming Soon: Configure assignment settings and requirements" } }
