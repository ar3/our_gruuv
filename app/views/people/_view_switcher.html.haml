.dropdown
  %button.btn.btn-outline-primary.btn-sm.dropdown-toggle{"data-bs-toggle" => "dropdown", "aria-expanded" => "false", type: "button"}
    %i.bi.bi-eye.me-2
    = people_current_view_name
  %ul.dropdown-menu
    %li
      - if action_name == 'public'
        .dropdown-item.text-muted
          %i.bi.bi-globe.me-2
          Public View (Active)
          %i.bi.bi-check-circle.text-success.ms-2
      - elsif @person
        = link_to public_person_path(@person), class: 'dropdown-item' do
          %i.bi.bi-globe.me-2
          Public View
      
    %li
      - if action_name == 'teammate'
        .dropdown-item.text-muted
          %i.bi.bi-people.me-2
          Teammate View (Active)
          %i.bi.bi-check-circle.text-success.ms-2
      - elsif @teammate && policy(@teammate).internal?
        = link_to internal_organization_company_teammate_path(current_organization, @teammate), class: 'dropdown-item' do
          %i.bi.bi-people.me-2
          Teammate View
      - else
        .dropdown-item.text-muted.disabled
          %i.bi.bi-people.me-2
          Teammate View
          %i.bi.bi-exclamation-triangle.text-warning.ms-2{"data-bs-toggle" => "tooltip", "data-bs-title" => "You must be an active employee in the same organization to view the teammate version"}
      
    %li
      - if action_name == 'complete_picture'
        .dropdown-item.text-muted
          %i.bi.bi-graph-up.me-2
          Active Job View (Active)
          %i.bi.bi-check-circle.text-success.ms-2
      - elsif @teammate && policy(@teammate).complete_picture?
        = link_to complete_picture_organization_company_teammate_path(current_organization, @teammate), class: 'dropdown-item' do
          %i.bi.bi-graph-up.me-2
          Active Job View
      - else
        .dropdown-item.text-muted.disabled
          %i.bi.bi-graph-up.me-2
          Active Job View
          %i.bi.bi-exclamation-triangle.text-warning.ms-2{"data-bs-toggle" => "tooltip", "data-bs-title" => "You need employment management permissions or to be in the managerial hierarchy to access complete picture features"}
      
    %li
      - if action_name == 'show' && controller_name == 'check_ins'
        .dropdown-item.text-muted
          %i.bi.bi-chat-square-text.me-2
          Check-In (Active)
          %i.bi.bi-check-circle.text-success.ms-2
      - elsif @teammate && policy(@teammate).view_check_ins?
        = link_to organization_company_teammate_check_ins_path(current_organization, @teammate), class: 'dropdown-item' do
          %i.bi.bi-chat-square-text.me-2
          Check-In
      - else
        .dropdown-item.text-muted.disabled
          %i.bi.bi-chat-square-text.me-2
          Check-In
          %i.bi.bi-exclamation-triangle.text-warning.ms-2{"data-bs-toggle" => "tooltip", "data-bs-title" => "You need employment management permissions or to be in the managerial hierarchy to access check-in features"}
    
    %li
      - if action_name == 'show' && controller_name == 'finalizations'
        .dropdown-item.text-muted
          %i.bi.bi-check-circle.me-2
          Check-In Review (Active)
          %i.bi.bi-check-circle.text-success.ms-2
      - elsif @teammate && policy(@teammate).view_check_ins?
        = link_to organization_company_teammate_finalization_path(current_organization, @teammate), class: 'dropdown-item' do
          %i.bi.bi-check-circle.me-2
          Check-In Review
      - else
        .dropdown-item.text-muted.disabled
          %i.bi.bi-check-circle.me-2
          Check-In Review
          %i.bi.bi-exclamation-triangle.text-warning.ms-2{"data-bs-toggle" => "tooltip", "data-bs-title" => "You need employment management permissions or to be in the managerial hierarchy to access finalization features"}
      
    %li
      - if action_name == 'audit'
        .dropdown-item.text-muted
          %i.bi.bi-clock-history.me-2
          Acknowledgement (Active)
          %i.bi.bi-check-circle.text-success.ms-2
      - elsif @teammate && policy(@teammate).audit?
        = link_to audit_organization_employee_path(current_organization, @teammate), class: 'dropdown-item' do
          %i.bi.bi-clock-history.me-2
          Acknowledgement
      - else
        .dropdown-item.text-muted.disabled
          %i.bi.bi-clock-history.me-2
          Acknowledgement
          %i.bi.bi-exclamation-triangle.text-warning.ms-2{"data-bs-toggle" => "tooltip", "data-bs-title" => "You need MAAP management permissions for this organization or to be in the managerial hierarchy to access audit features"}
      
    %li
      - if action_name == 'show' && controller_name == 'position'
        .dropdown-item.text-muted
          %i.bi.bi-briefcase.me-2
          Seat History Mode (Active)
          %i.bi.bi-check-circle.text-success.ms-2
      - elsif current_organization && @teammate && policy(@teammate).show?
        = link_to organization_teammate_position_path(current_organization, @teammate), class: 'dropdown-item' do
          %i.bi.bi-briefcase.me-2
          Seat History Mode
      - else
        .dropdown-item.text-muted.disabled
          %i.bi.bi-briefcase.me-2
          Seat History Mode
          %i.bi.bi-exclamation-triangle.text-warning.ms-2{"data-bs-toggle" => "tooltip", "data-bs-title" => "You need employment management permissions or to be in the managerial hierarchy to access seat history"}
      
    %li
      - if action_name == 'show' && controller_name == 'people'
        .dropdown-item.text-muted
          %i.bi.bi-gear.me-2
          Manage Profile Mode (Active)
          %i.bi.bi-check-circle.text-success.ms-2
      - elsif @teammate && policy(@teammate).show?
        = link_to organization_company_teammate_path(current_organization, @teammate), class: 'dropdown-item' do
          %i.bi.bi-gear.me-2
          Manage Profile Mode
      - else
        .dropdown-item.text-muted.disabled
          %i.bi.bi-gear.me-2
          Manage Profile Mode
          %i.bi.bi-exclamation-triangle.text-warning.ms-2{"data-bs-toggle" => "tooltip", "data-bs-title" => "You need employment management permissions or to be in the managerial hierarchy to access management features"}
